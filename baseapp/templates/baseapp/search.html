{% extends 'baseapp/base.html' %}

{% block content %}


<!-- 
{% if q %}
<h3>Post Containing "{{ q }}"</h3>

<p>
    {% with results.count as total_results %}
    Found {{ total_results }} results{{ total_result|pluralize }}
    {% endwith %}
</p>
{% endif %}

{% for post in results %}
<h4><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h4>
{% empty %}
<h4>There are no post on your query</h4>
{% endfor %}

<h3>Search here</h3>

<form  method="get" class="d-flex">
    {{form.as_p}}
     <input  class="form-control me-2" type="search" name="search" placeholder="Search" aria-label="Search"> -->
    <!-- <a  class="link-secondary" href="#" aria-label="Search">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="mx-3" role="img" viewBox="0 0 24 24"><title>Search</title><circle cx="10.5" cy="10.5" r="7.5"/><path d="M21 21l-5.2-5.2"/></svg>
      </a> 
    <button class="btn btn-outline-success" type="submit">Search</button>
</form>
-->













<div class="row px-5">


    <div class="col-md-8 ">
        {% if q %}
        <h3 class="p-4 mb-4 fst-italic border-bottom">
        Post Containing "{{ q }}"
        </h3>

        <h5>
            {% with results.count as total_results %}
            Found {{ total_results }} results{{ total_result|pluralize }}
            {% endwith %}
        </h5>
        
    
        <article class="blog-post pt-5">


            {% for post in results %}
            <h4></h4>
            <h2 class="blog-post-title "><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
            <p class="blog-post-meta">{{post.published_date|date:'M D Y' }} <a href="#">{{post.user}}</a></p>
            <p class="blog-post-meta">category: <a href="">{{post.category}}</a></p>

            <div>
                <p class=" blog-content">{{ post.text|safe|linebreaksbr|truncatechars:450 }}</p>
                <a class="blog-content" style="text-decoration: none;" id="link" href="{% url 'post_detail' pk=post.pk %}">Comments : {{post.approved_comments.count}}</a>
            </div>
            {% if post.published_date %}
                <p>Published On: {{post.published_date|date:'D M Y' }}</p>
                {% else %}
                    <p>Created on : {{ post.created_date|date:'D M Y' }}</p>
                    <a class="btn btn-success brand" href="{% url 'post_publish' pk=post.pk %}">Publish</a>
                    
                {% endif %}

        </article>

            {% empty %}
            <h4>There are no post on your query</h4>
            {% endfor %}

        {% else %}
        <div class="search py-5">
        
            <h3>Search here</h3>
        
            <form  method="get" class="d-flex center">

                {{form.q}}<br>&nbsp;
                <p>category:</p>{{form.c}}&nbsp;<br>
                
                <button class="btn btn-outline-dark" type="submit">Search</button>
            </form>
        
        </div>
        {% endif %}
    
        
    
                      <!-- Footer  -->
    

    
      </div>
      <div class="col-4">
        
    
        <div class="col" style="position: relative;">
          <div class="position-sticky" style="top: 2rem;">
            <div class="p-4 mb-3 bg-light rounded">
              <a class="btn btn btn-outline-light my-5 p-1 bg-dark color-white" href="{% url 'about' %}"> About </a>
              <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed id quam et mauris mattis consequat. Nunc sit amet dui nec risus consequat hendrerit. Sed ut lorem vitae nibh mollis dignissim et ut nisi. </p>
            </div>
    
            <div class="p-4">
              <h4 class="fst-italic">Archives</h4>
            {% for item in category %}
                 <a class="p-2 link-secondary" href="#">{{item.name}}</a>
            {% endfor %}
            </div>
    
            <div class="p-4">
              <h4 class="fst-italic">Elsewhere</h4>
              <ol class="list-unstyled">
                <li><a href="#">GitHub</a></li>
                <li><a href="#">Twitter</a></li>
                <li><a href="#">Facebook</a></li>
              </ol>
            </div>
          </div>
        </div>
    
    
    </div>
    
    




























{% endblock %}